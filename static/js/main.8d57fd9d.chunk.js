(this.webpackJsonpargosearch=this.webpackJsonpargosearch||[]).push([[0],{54:function(e,t,a){e.exports=a(71)},59:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),c=(a(59),a(24)),i=a(42),s=a(25),u=a.n(s),p=a(34),d=a(43),f=a(6),m=a(38),g=a(39),h=(a(61),a(35)),b=a(33),w=a(14),E=a(53),D=a(36),y=a(5),v=a.n(y),O=a(45),j=a.n(O),_=a(46),C=a.n(_),k=a(47),A=a.n(k),S=a(48),x=a.n(S);function I(){var e=Object(d.a)(['\n  query GeoProfiles($geo: geography!, $startDate: timestamptz = "1990-01-01", $endDate: timestamptz = "2050-01-01") {\n    argo_profiles(order_by: {date: desc}, where: {_and: {geography: {_st_d_within: {from: $geo, distance:10000}}, date: {_is_null: false, _gt: $startDate, _lt: $endDate}}}) {\n      date\n      float_id\n      geography\n      file\n    }\n  }\n']);return I=function(){return e},e}var P=Object(f.d)(x.a);delete v.a.Icon.Default.prototype._getIconUrl,v.a.Icon.Default.mergeOptions({iconRetinaUrl:C.a,iconUrl:j.a,shadowUrl:A.a});var $=new b.a({uri:"https://cchdo.ucsd.edu/v1/graphql"}),z=Object(b.b)(I()),F=function(e){var t=e.loading,n=e.error,o=e.data;e.geojson;if(t)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error ...");function l(){return(l=Object(p.a)(u.a.mark((function e(t){var n,r,o,l,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(3).then(a.bind(null,74));case 2:return n=e.sent,r=n.default,e.next=6,a.e(4).then(a.t.bind(null,73,7));case 6:o=e.sent,l=new r,c=l.writable,i=c.getWriter(),"https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/",s=t.argo_profiles.map((function(e){return e.file})).values(),new ReadableStream({pull:function(e){return Object(p.a)(u.a.mark((function t(){var a,n,r,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.next(),n=a.done,r=a.value,!n){t.next=4;break}return e.enqueue({name:"citation.txt",lastModified:new Date(0),stream:function(){return new Response("Argo (2020). Argo float data and metadata from Global Data Assembly Centre (Argo GDAC) - Snapshot of Argo GDAC of February 10st 2020. SEANOE. https://doi.org/10.17882/42182#70590").body}}),t.abrupt("return",e.close());case 4:return t.next=6,fetch("https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/"+r);case 6:o=t.sent,l=o.body,e.enqueue({name:"profiles/".concat(r.split("/").pop()),stream:function(){return l}});case 9:case"end":return t.stop()}}),t)})))()}}).pipeThrough(new r).pipeTo(o.createWriteStream("argo_profiles.zip")),i.close();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,o.argo_profiles.length," Profiles"),"BigInt"in window?r.a.createElement("button",{onClick:function(){return function(e){return l.apply(this,arguments)}(o)}},"Download Profiles"):r.a.createElement("span",null,"Bulk Download not supported"),r.a.createElement("div",null,o.argo_profiles.map((function(e){var t=e.file,a=e.float_id,n=e.date;e.geography;return r.a.createElement("div",{key:t},r.a.createElement("p",null,a,": ",n,r.a.createElement("br",null),r.a.createElement("small",null,t)))}))))},U=function(e){var t=e.loading,a=e.error,n=e.data;if(t)return r.a.createElement("p",null,"Loading...");if(a)return r.a.createElement("p",null,"Error ...");var o={type:"FeatureCollection",features:n.argo_profiles.map((function(e){return{type:"Feature",geometry:e.geography,properties:Object(i.a)(e,["geography"])}}))},l={type:"slicer",data:o,style:{radius:4,weight:.5,opacity:1,color:"#3388ff",fillColor:"#3388ff",fillOpacity:.6,fill:!0,stroke:!0},zIndex:401,popup:function(e){return"<div><h3>Float ID: ".concat(e.properties.float_id,"</h3>Profile Date: ").concat(e.properties.date,'<br /><a href="https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/').concat(e.properties.file,'">Download netCDF</a></div>')}};return r.a.createElement(P,Object.assign({key:"floats_".concat(o.features.length)},l))};var q=function(){var e,t,a,o=Object(n.useState)(!1),l=Object(c.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)("firstten"),p=Object(c.a)(u,2),d=p[0],f=p[1],b=Object(n.useState)(new Date("1990-01-01")),y=Object(c.a)(b,2),v=y[0],O=y[1],j=Object(n.useState)(new Date("2050-01-01")),_=Object(c.a)(j,2),C=_[0],k=_[1],A=Object(n.useState)(window.location.hash),S=Object(c.a)(A,1)[0],x=decodeURIComponent(S.slice(1));try{e=JSON.parse(x)}catch(q){e={}}try{t=new Date(e.properties.startDate),a=new Date("".concat(e.properties.endDate,"T24:00:00Z"))}catch(q){}var I=Object(E.a)(z,{client:$,variables:{geo:e.geometry,startDate:v,endDate:C}}),P=I.loading,q=I.error,B=I.data;return r.a.createElement(w.a,{client:$},r.a.createElement("div",null,r.a.createElement(h.a,{id:"sidebar",position:"right",collapsed:i,closeIcon:r.a.createElement(D.a,null),selected:d,onOpen:function(e){f(e),s(!1)},onClose:function(){return s(!0)}},r.a.createElement(h.b,{id:"firstten",header:"Profile List",icon:r.a.createElement(D.b,null)},r.a.createElement("div",null,r.a.createElement("h4",null,"Argo Profiles Near Cruise ",e.properties.expocode),r.a.createElement("button",{onClick:function(){O(new Date("1990-01-01")),k(new Date("2050-01-01"))}},"Show Colocated Profiles from All Time"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){O(t),k(a)}},"Show Colocated Profiles Durring Cruise Dates (",e.properties.startDate,"/",e.properties.endDate,")"),r.a.createElement(F,{loading:P,error:q,data:B,geojson:e})))),r.a.createElement(m.a,{className:"mapStyle",center:[0,0],zoom:2},r.a.createElement(g.a,{attribute:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(U,{loading:P,error:q,data:B}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.8d57fd9d.chunk.js.map