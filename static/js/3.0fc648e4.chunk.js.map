{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@transcend-io/conflux/crc.js","../node_modules/@transcend-io/conflux/write.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/inherits.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_getPrototypeOf","o","Object","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_classCallCheck","instance","Constructor","TypeError","Crc32","this","crc","data","table","offset","len","length","i","j","t","encoder","TextEncoder","ZipTransformer","files","create","filenames","BigInt","entry","ctrl","name","trim","date","Date","lastModified","now","directory","endsWith","abort","Error","nameBuf","encode","push","comment","compressedLength","uncompressedLength","header","Uint8Array","zipObject","hdv","DataView","buffer","setUint32","setUint16","getHours","getMinutes","getSeconds","getFullYear","getMonth","getDate","set","enqueue","footer","stream","reader","getReader","read","it","done","chunk","value","append","get","Number","subarray","file","index","forEach","fileName","dv","setUint8","Writer","self","call","assertThisInitialized","subClass","superClass","writable","configurable","TransformStream"],"mappings":"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","file":"static/js/3.0fc648e4.chunk.js","sourcesContent":["export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","class Crc32 {\n  constructor() {\n    this.crc = -1;\n  }\n\n  append(data) {\n    let crc = this.crc | 0;\n    const { table } = this;\n    for (let offset = 0, len = data.length | 0; offset < len; offset++) {\n      crc = (crc >>> 8) ^ table[(crc ^ data[offset]) & 0xFF];\n    }\n    this.crc = crc;\n  }\n\n  get () {\n    return (this.crc ^ (-1)) >>> 0\n  }\n}\n\nCrc32.prototype.table = (() => {\n  let i; let j; let t; const table = [];\n  for (i = 0; i < 256; i++) {\n    t = i;\n    for (j = 0; j < 8; j++) {\n      t = (t & 1)\n        ? (t >>> 1) ^ 0xEDB88320\n        : t >>> 1;\n    }\n    table[i] = t;\n  }\n  return table;\n})();\n\nexport default Crc32;\n","import Crc32 from './crc.js';\n\nconst encoder = new TextEncoder();\n\nclass ZipTransformer {\n  constructor() {\n    this.files = Object.create(null);\n    this.filenames = [];\n    this.offset = BigInt(0);\n  }\n\n  /**\n   * [transform description]\n   *\n   * @param  {File}  entry [description]\n   * @param  {ReadableStreamDefaultController}  ctrl\n   * @return {Promise}       [description]\n   */\n  async transform(entry, ctrl) {\n    let name = entry.name.trim();\n    const date = new Date(typeof entry.lastModified === 'undefined' ? Date.now() : entry.lastModified);\n\n    if (entry.directory && !name.endsWith('/')) name += '/';\n    if (this.files[name]) ctrl.abort(new Error('File already exists.'));\n\n    const nameBuf = encoder.encode(name);\n    this.filenames.push(name);\n\n    this.files[name] = {\n      directory: !!entry.directory,\n      nameBuf,\n      offset: this.offset,\n      comment: encoder.encode(entry.comment || ''),\n      compressedLength: BigInt(0),\n      uncompressedLength: BigInt(0),\n      header: new Uint8Array(26),\n    };\n\n    const zipObject = this.files[name];\n\n    const { header } = zipObject;\n    const hdv = new DataView(header.buffer)\n    const data = new Uint8Array(30 + nameBuf.length);\n\n    hdv.setUint32(0, 0x14000808);\n    hdv.setUint16(6, (((date.getHours() << 6) | date.getMinutes()) << 5) | date.getSeconds() / 2, true);\n    hdv.setUint16(8, ((((date.getFullYear() - 1980) << 4) | (date.getMonth() + 1)) << 5) | date.getDate(), true);\n    hdv.setUint16(22, nameBuf.length, true);\n    data.set([80, 75, 3, 4]);\n    data.set(header, 4);\n    data.set(nameBuf, 30);\n\n    this.offset += BigInt(data.length);\n    ctrl.enqueue(data);\n\n    const footer = new Uint8Array(16);\n    footer.set([80, 75, 7, 8]);\n\n    if (entry.stream) {\n      zipObject.crc = new Crc32();\n      const reader = entry.stream().getReader();\n\n      while (true) {\n        const it = await reader.read();\n        if (it.done) break;\n        const chunk = it.value;\n        zipObject.crc.append(chunk);\n        zipObject.uncompressedLength += BigInt(chunk.length);\n        zipObject.compressedLength += BigInt(chunk.length);\n        ctrl.enqueue(chunk);\n      }\n\n      hdv.setUint32(10, zipObject.crc.get(), true);\n      hdv.setUint32(14, Number(zipObject.compressedLength), true);\n      hdv.setUint32(18, Number(zipObject.uncompressedLength), true);\n      footer.set(header.subarray(10, 22), 4);\n    }\n\n    hdv.setUint16(22, nameBuf.length, true);\n\n    this.offset += zipObject.compressedLength + BigInt(16);\n\n    ctrl.enqueue(footer);\n  }\n\n  /**\n   * @param  {ReadableStreamDefaultController} ctrl\n   */\n  flush(ctrl) {\n    let length = 0;\n    let index = 0;\n    let file;\n\n    this.filenames.forEach((fileName) => {\n      file = this.files[fileName];\n      length += 46 + file.nameBuf.length + file.comment.length;\n    });\n\n    const data = new Uint8Array(length + 22);\n    const dv = new DataView(data.buffer);\n\n    this.filenames.forEach((fileName) => {\n      file = this.files[fileName];\n      dv.setUint32(index, 0x504b0102);\n      dv.setUint16(index + 4, 0x1400);\n      dv.setUint16(index + 32, file.comment.length, true);\n      dv.setUint8(index + 38, file.directory ? 16 : 0);\n      dv.setUint32(index + 42, Number(file.offset), true);\n      data.set(file.header, index + 6);\n      data.set(file.nameBuf, index + 46);\n      data.set(file.comment, index + 46 + file.nameBuf.length);\n      index += 46 + file.nameBuf.length + file.comment.length;\n    });\n\n    dv.setUint32(index, 0x504b0506);\n    dv.setUint16(index + 8, this.filenames.length, true);\n    dv.setUint16(index + 10, this.filenames.length, true);\n    dv.setUint32(index + 12, length, true);\n    dv.setUint32(index + 16, Number(this.offset), true);\n    ctrl.enqueue(data);\n\n    // cleanup\n    this.files = Object.create(null);\n    this.filenames = [];\n    this.offset = 0;\n  }\n}\n\n// eslint-disable-next-line no-undef\nclass Writer extends TransformStream {\n  constructor() {\n    super(new ZipTransformer());\n  }\n}\n\nexport default Writer;\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}"],"sourceRoot":""}