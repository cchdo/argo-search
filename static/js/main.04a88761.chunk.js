(this.webpackJsonpargosearch=this.webpackJsonpargosearch||[]).push([[0],{57:function(e,t,a){e.exports=a(74)},62:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(25),l=a.n(o),c=(a(62),a(26)),i=a(27),s=a.n(i),u=a(36),d=a(46),p=a(6),m=a(41),f=a(43),g=a(40),h=a(42),b=(a(64),a(37)),E=a(35),w=a(15),D=a(56),v=a(38),y=a(5),O=a.n(y),_=a(48),j=a.n(_),A=a(49),k=a.n(A),S=a(50),x=a.n(S),C=a(51),P=a.n(C);function I(){var e=Object(d.a)(['\n  query GeoProfiles($geo: geography!, $startDate: timestamptz = "1990-01-01", $endDate: timestamptz = "2050-01-01") {\n    argo_profiles(order_by: {date: desc}, where: {_and: {geography: {_st_d_within: {from: $geo, distance:10000}}, date: {_is_null: false, _gt: $startDate, _lt: $endDate}}}) {\n      date\n      float_id\n      geography\n      file\n    }\n  }\n']);return I=function(){return e},e}Object(p.d)(P.a);delete O.a.Icon.Default.prototype._getIconUrl,O.a.Icon.Default.mergeOptions({iconRetinaUrl:k.a,iconUrl:j.a,shadowUrl:x.a});var $=new E.a({uri:"https://cchdo.ucsd.edu/v1/graphql"}),z=Object(E.b)(I()),U=function(e){var t=e.loading,n=e.error,o=e.data;e.geojson;if(t)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error ...");function l(){return(l=Object(u.a)(s.a.mark((function e(t){var n,r,o,l,c,i,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(3).then(a.bind(null,77));case 2:return n=e.sent,r=n.default,e.next=6,a.e(4).then(a.t.bind(null,76,7));case 6:o=e.sent,l=new r,c=l.writable,i=c.getWriter(),"https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/",d=t.argo_profiles.map((function(e){return e.file})).values(),new ReadableStream({pull:function(e){return Object(u.a)(s.a.mark((function t(){var a,n,r,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.next(),n=a.done,r=a.value,!n){t.next=4;break}return e.enqueue({name:"/citation.txt",lastModified:new Date(0),stream:function(){return new Response("Argo (2020). Argo float data and metadata from Global Data Assembly Centre (Argo GDAC) - Snapshot of Argo GDAC of February 10st 2020. SEANOE. https://doi.org/10.17882/42182#70590").body}}),t.abrupt("return",e.close());case 4:return t.next=6,fetch("https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/"+r);case 6:o=t.sent,l=o.body,e.enqueue({name:"/profiles/".concat(r.split("/").pop()),stream:function(){return l}});case 9:case"end":return t.stop()}}),t)})))()}}).pipeThrough(new r).pipeTo(o.createWriteStream("argo_profiles.zip")),i.close();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,o.argo_profiles.length," Profiles"),"BigInt"in window?r.a.createElement("button",{onClick:function(){return function(e){return l.apply(this,arguments)}(o)}},"Download Profiles"):r.a.createElement("span",null,"Bulk Download not supported"),r.a.createElement("div",null,o.argo_profiles.map((function(e){var t=e.file,a=e.float_id,n=e.date;e.geography;return r.a.createElement("div",{key:t},r.a.createElement("p",null,a,": ",n,r.a.createElement("br",null),r.a.createElement("small",null,t)))}))))},q=function(e){var t=e.loading,a=e.error,n=e.data;return t?r.a.createElement("p",null,"Loading..."):a?r.a.createElement("p",null,"Error ..."):n.argo_profiles.map((function(e){var t=e.file,a=e.float_id,n=e.geography;return r.a.createElement(g.a,{key:t,radius:4,center:[n.coordinates[1],n.coordinates[0]]},r.a.createElement(h.a,null,r.a.createElement("h3",null,"Argo Float: ",a),r.a.createElement("a",{href:"https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/"+t},"Download Profile")))}))};var B=function(){var e,t,a,o=Object(n.useState)(!1),l=Object(c.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)("firstten"),d=Object(c.a)(u,2),p=d[0],g=d[1],h=Object(n.useState)(new Date("1990-01-01")),E=Object(c.a)(h,2),y=E[0],O=E[1],_=Object(n.useState)(new Date("2050-01-01")),j=Object(c.a)(_,2),A=j[0],k=j[1],S=Object(n.useState)(window.location.hash),x=Object(c.a)(S,1)[0],C=decodeURIComponent(x.slice(1));try{e=JSON.parse(C)}catch(B){e={}}try{t=new Date(e.properties.startDate),a=new Date("".concat(e.properties.endDate,"T24:00:00Z"))}catch(B){}var P=Object(D.a)(z,{client:$,variables:{geo:e.geometry,startDate:y,endDate:A}}),I=P.loading,B=P.error,G=P.data;return r.a.createElement(w.a,{client:$},r.a.createElement("div",null,r.a.createElement(b.a,{id:"sidebar",position:"right",collapsed:i,closeIcon:r.a.createElement(v.a,null),selected:p,onOpen:function(e){g(e),s(!1)},onClose:function(){return s(!0)}},r.a.createElement(b.b,{id:"firstten",header:"Profile List",icon:r.a.createElement(v.b,null)},r.a.createElement("div",null,r.a.createElement("h4",null,"Argo Profiles Near Cruise ",e.properties.expocode),r.a.createElement("button",{onClick:function(){O(new Date("1990-01-01")),k(new Date("2050-01-01"))}},"Show Profiles from All Time"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){O(t),k(a)}},"Show Profiles Durring Cruise Dates (",e.properties.startDate,"/",e.properties.endDate,")"),r.a.createElement(U,{loading:I,error:B,data:G,geojson:e})))),r.a.createElement(m.a,{className:"mapStyle",center:[0,0],zoom:2},r.a.createElement(f.a,{attribute:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(q,{loading:I,error:B,data:G}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.04a88761.chunk.js.map