(this.webpackJsonpargosearch=this.webpackJsonpargosearch||[]).push([[0],{53:function(e,t,a){e.exports=a(70)},58:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),i=(a(58),a(33)),c=a(24),u=a.n(c),s=a(34),d=a(35),p=a(6),f=a(39),m=a(40),g=(a(60),a(36)),h=a(27),b=a(14),v=a(52),w=a(37),y=a(5),E=a.n(y),_=a(44),O=a.n(_),D=a(45),j=a.n(D),k=a(46),x=a.n(k),A=a(47),I=a.n(A);function S(){var e=Object(d.a)(["\n  query GeoProfiles($geo: geography!) {\n    argo_profiles(order_by: {date: desc}, where: {_and: {geography: {_st_d_within: {from: $geo, distance:10000}}, date: {_is_null: false}}}) {\n      date\n      float_id\n      geography\n      file\n    }\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(d.a)(["\n        query LatestProfiles($number: Int!){\n          argo_profiles(limit: $number, order_by: {date: desc}, where: { _and: {geography: {_is_null: false}, date: {_is_null: false}}}) {\n            date\n            float_id\n            geography\n            file\n          }\n        }\n"]);return C=function(){return e},e}var F=Object(p.d)(I.a);delete E.a.Icon.Default.prototype._getIconUrl,E.a.Icon.Default.mergeOptions({iconRetinaUrl:j.a,iconUrl:O.a,shadowUrl:x.a});var P=new h.a({uri:"https://cchdo.ucsd.edu/v1/graphql"}),q=(Object(h.b)(C()),Object(h.b)(S())),z=function(e){var t=e.loading,n=e.error,o=e.data;if(t)return r.a.createElement("p",null,"Loading...");if(n)return r.a.createElement("p",null,"Error ...");var l="BigInt"in window;function i(){return(i=Object(s.a)(u.a.mark((function e(t){var n,r,o,l,i,c,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(3).then(a.bind(null,73));case 2:return n=e.sent,r=n.default,e.next=6,a.e(4).then(a.t.bind(null,72,7));case 6:o=e.sent,l=new r,l.readable,i=l.writable,c=i.getWriter(),o.createWriteStream("argo_profiles.zip"),"https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/",d=t.argo_profiles.map((function(e){return e.file})).values(),new ReadableStream({pull:function(e){return Object(s.a)(u.a.mark((function t(){var a,n,r,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.next(),n=a.done,r=a.value,!n){t.next=4;break}return e.enqueue({name:"/citation.txt",lastModified:new Date(0),stream:function(){return new Response("Argo (2020). Argo float data and metadata from Global Data Assembly Centre (Argo GDAC) - Snapshot of Argo GDAC of February 10st 2020. SEANOE. https://doi.org/10.17882/42182#70590").body}}),t.abrupt("return",e.close());case 4:return t.next=6,fetch("https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/"+r);case 6:o=t.sent,l=o.body,e.enqueue({name:"/profiles/".concat(r.split("/").pop()),stream:function(){return l}});case 9:case"end":return t.stop()}}),t)})))()}}).pipeThrough(new r).pipeTo(o.createWriteStream("argo_profiles.zip")),c.close();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,o.argo_profiles.length," Profiles"),l?r.a.createElement("button",{onClick:function(){return function(e){return i.apply(this,arguments)}(o)}},"Download Profiles"):r.a.createElement("span",null,"Bulk Downloads not supported"),r.a.createElement("div",null,o.argo_profiles.map((function(e){var t=e.file,a=e.float_id,n=e.date;e.geography;return r.a.createElement("div",{key:t},r.a.createElement("p",null,a,": ",n,r.a.createElement("br",null),r.a.createElement("small",null,t)))}))))},U=function(e){var t=e.loading,a=e.error,n=e.data;if(t)return r.a.createElement("p",null,"Loading...");if(a)return r.a.createElement("p",null,"Error ...");var o={type:"FeatureCollection",features:n.argo_profiles.map((function(e){var t=e.file,a=e.date,n=e.float_id;return{type:"Feature",geometry:e.geography,properties:{float_id:n,date:a,file:t}}}))};return r.a.createElement(F,{type:"slicer",style:{radius:4,weight:.5,opacity:1,color:"#3388ff",fillColor:"#3388ff",fillOpacity:.6,fill:!0,stroke:!0},data:o,zIndex:401,popup:function(e){return"<div><h3>Float ID:".concat(e.properties.float_id,"</h3>Profile Date: ").concat(e.properties.date,'<br/><a href="https://tmp.h2o.ucsd.edu/202002-ArgoData/dac/').concat(e.properties.file,'">Download netCDF</a></div>')}})};var W=function(){var e,t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)("firstten"),u=Object(i.a)(c,2),s=u[0],d=u[1],p=Object(n.useState)(window.location.hash),h=Object(i.a)(p,2),y=h[0],E=(h[1],decodeURIComponent(y.slice(1)));console.log(E);try{e=JSON.parse(E)}catch(D){e={}}var _=Object(v.a)(q,{client:P,variables:{geo:e}}),O=_.loading,D=_.error,j=_.data;return r.a.createElement(b.a,{client:P},r.a.createElement("div",null,r.a.createElement(g.a,{id:"sidebar",position:"right",collapsed:o,closeIcon:r.a.createElement(w.a,null),selected:s,onOpen:function(e){d(e),l(!1)},onClose:function(){return l(!0)}},r.a.createElement(g.b,{id:"firstten",header:"Profile List",icon:r.a.createElement(w.b,null)},r.a.createElement("div",null,r.a.createElement(z,{loading:O,error:D,data:j})))),r.a.createElement(f.a,{className:"mapStyle",center:[0,0],zoom:2},r.a.createElement(m.a,{attribute:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(U,{loading:O,error:D,data:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.eca8fddb.chunk.js.map